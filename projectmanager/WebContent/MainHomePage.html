<!DOCTYPE html >
<html>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet"
	href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script
	src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script
	src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular.min.js"></script>
<script
	src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular-route.js"></script>
<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>


<head>
<style type="text/css">
body {
	direction: rtl;
	width: 1024px !important;
	font-size: 15px;
	height: 850px;
	
}

table {
	width: 100%;
	border-collapse: collapse;
}

.littletd {
	width: 5px;
}

/* .coloredTR {
	background: -webkit-linear-gradient(left, #25c481, #25b7c4);
} */
.footer {
	text-align: center;
}

.title {
	text-align: center;
}

.hide, .managerPage, .employeePage, .projectPage {
	display: none;
}
</style>
</head>
<body data-ng-app="myApp">
	<table>
		<tr class="coloredTR">
			<td>escadar</td>
			<td colspan="90%" class="title">title</td>
			<td class="littletd hide " id="hide"><button>Errors</button></td>
			<td class="littletd hide"><button>Logout</button></td>
		</tr>

		<tr>
			<td class="url1 managerPage"><a href="#!managerSettings">managerSettings</a></td>
			<td class="url employeePage"><a href="#!one">E.HourReport</a></td>
			<td class="url1 managerPage"><a href="#!three">ProjectManagerList</a></td>
			<td class="url  projectPage"><a href="#!two">ActiveProjects</a></td>
			<td class="url1 managerPage"><a href="#!EmployeeManagement">EmployeeManagement</a></td>
			<td class="url managerPage"><a href="#!ProjectManagement">ProjectManagement</a></td>
			<td class="url1 employeePage"><a href="#!FormEmployeeHourReport">FormEmployeeHourReport</a></td>
			<td class="url managerPage"><a href="#!CustomerManagement">CustomerManagement</a></td>
			<td class="url managerPage"><a href="#!HourReports">HourReports</a></td>
			

		</tr>
		<tr class="coloredTR">
			<td colspan="100%">

				<div data-ng-view></div>

			</td>
		</tr>

		<tr class="coloredTR footer">
			<td colspan="100%">footer</td>
		</tr>

	</table>
	<script>
		var app = angular.module("myApp", [ "ngRoute" ]);
		app.config(function($routeProvider) {
			$routeProvider.when("/ProjectManagement", {
				templateUrl : "ProjectManagement.html",
				controller : "ProjectManagement"

			}).when('/', {
				templateUrl : 'LoginPage.html',
				controller : "loginCtrl"

			}).when("/one", {
				templateUrl : "EmployeeHourReport.html",
				controller : "EmployeeHourReport"

			}).when("/two", {
				templateUrl : "ActiveProjects.html",
				controller : "ActiveProjects"

			}).when("/three", {
				templateUrl : "ProjectManagerList.html",
				controller : "ProjectManagerList"

			}).when("/FormEmployeeHourReport", {
				templateUrl : "FormEmployeeHourReport.html",
				controller : "FormEmployeeHourReport"
			})

			.when("/CustomerManagement", {
				templateUrl : "CustomerManagement.html",
				controller : "CustomerManagement"

			}).when("/EmployeeManagement", {
				templateUrl : "EmployeeManagement.html",
				controller : "EmployeeManagement",

			})
		});

		app.controller("ProjectManagement",function($scope, $http) {

							$http.get("http://localhost/projectmanager/rest/project/getall")
									.then(function(response) {
												$scope.Project = response.data;

												$scope.addProject = function() {

													// $http.get("http://localhost/projectmanager/rest/project/createproject?"projectname"=+$scope.projectname+"&customer"=+$scope.customer+"&customerprojectmanager"=+$scope.customerprojectmanager+"&projectmanageremail"=+$scope.projectmanageremail+"&projectmanagerphone"=+$scope.projectmanagerphone+"&projectmanageremail="+$scope.projectmanageremail+"&startdate="+$scope.startdate+"&enddate="+$scope.enddate+)
													//	 .then(function(response) {

													//	  console.log(response.data);  

													$scope.Project
															.push({
																projectname : $scope.projectname,
																customer : $scope.customer,
																customerprojectmanager : $scope.customerprojectmanager,
																projectmanageremail : $scope.projectmanageremail,
																projectmanagerphone : $scope.projectmanagerphone,

																startdate : $scope.startdate,
																enddate : $scope.enddate

															});

												};
												$scope.removeProject = function(
														index) {
													$scope.Project.splice(
															index, 1);
												};

											});
						});

		app
				.controller("EmployeeHourReport",
						function($scope, $http) {
							$http.get("http://localhost/projectmanager/rest/hourreport/getWeeklyHourReport")
									.then(function(response) {
										$scope.Employee = response.data;
										console.log(Employee);

									});
						});
		app
				.controller("ActiveProjects",
						function($scope, $http) {
							$http.get("http://localhost/projectmanager/rest/project/GetAllActiveProjects")
									.then(function(response) {
										$scope.ActiveProjects = response.data;

									});
						});
		app
				.controller("ProjectManagerList",
						function($scope, $http) {
							$http.get("http://localhost/projectmanager/rest/project/GetAllActiveProjects")
									.then(function(response) {
										$scope.ActiveProjects = response.data;

									});
							$http.get("http://localhost/projectmanager/rest/customer/popularCustomer")
									.then(function(response) {
										$scope.BigCustomers = response.data;

									});
							$http.get("http://localhost/projectmanager/rest/customer/getCustomerByStatus?isActive=true")
									.then(function(response) {
										$scope.ActiveCustomers = response.data;

									});

							$http.get("http://localhost/projectmanager/rest/project/getProjectsAboutToFinish")
									.then(function(response) {
												$scope.ProjectsAboutToFinish = response.data;

											});
						});
		app.controller("FormEmployeeHourReport", function($scope, $http) {
			$http.get("json/FormEmployeeHourReport.json").then(
					function(response) {
						$scope.FormEmployeeHourReport = response.data;

					});
		});

		app.controller("CustomerManagement", function($scope, $http) {
			$http.get("http://localhost/projectmanager/rest/customer/getall")
					.then(function(response) {
						$scope.CustomerManagement = response.data;

						$scope.deleteCustomer = function(index) {
							$scope.CustomerManagement.splice(index, 1);

						};

						$scope.addCustomer = function() {
							$scope.CustomerManagement.push({
								companyname : $scope.companyname,
								//	email:$scpoe.email,
								phone : $scope.phone,
								contactname : $scope.contactname
							});
						};
					});
		});
		app
				.controller(
						"EmployeeManagement",
						function($scope, $http) {
							$http.get("http://localhost/projectmanager/rest/employee/getAllEmployees")
									.then(function(response) {
												$scope.EmployeeManagement = response.data;
												$scope.selecteEmployee;

												$scope.deleteemployee = function(
														index) {
													$scope.EmployeeManagement
															.splice(index, 1);
												};

												$scope.addemployee = function() {
													$scope.EmployeeManagement
															.push({

																firstname : $scope.firstname,
																lastname : $scope.lastname,
																email : $scope.email,
																phone : $scope.phone,
																user : $scope.user

															});
												};

											});
						});
		app.controller("loginCtrl", function($scope, $http, $location) {
			$scope.getuser = function() {
				$http.get(
						"http://localhost/projectmanager/rest/user/getuser?username="
								+ $scope.username + "&password="
								+ $scope.password).then(function(response) {
					console.log(response.data);

					if (response.data.type == "c") {
						console.log(response.data.type);
						$location.path('/two');
					}
					;

					if (response.data.type == "e") {
						console.log(response.data.type);
						$(".employeePage").css("display", "block");
						$location.path('/one');
					}
					;

					if (response.data.type == "m") {
						console.log(response.data.type);
						$(".managerPage").css("display", "block");
						$location.path('/three');
					}
					;
				});

			};
		});
	</script>
</body>
</html>
